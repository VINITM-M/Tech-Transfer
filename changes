import React, { useEffect, useState } from 'react';
import Navbar from '../Navbar';
import Sidebar from '../Sidebar';
import { Outlet } from 'react-router-dom';
import LogoutConfirmationCard from './LogoutConfirmationCard';
import { Dialog, DialogContent, IconButton, CircularProgress } from '@mui/material';
import CloseIcon from '@mui/icons-material/Close';

const Home = (props: any) => {
  const [state, setState] = useState({
    logoutCardVisibility: '',
    optionsCard: false,
  });

  const [openDialog, setOpenDialog] = useState(false);
  const [minimized, setMinimized] = useState(false);

  useEffect(() => {
    if (props.loading) {
      setOpenDialog(true);
      setMinimized(false);
    } else {
      setOpenDialog(false);
      setMinimized(false);
    }
  }, [props.loading]);

  return (
    <>
      <Navbar />
      <Sidebar />
      <section className="p_Container_full section_container">
        <Outlet />
      </section>

      {props.loading && openDialog && !minimized && (
        <Dialog
          open
          onClose={() => setMinimized(true)}
          hideBackdrop
          PaperProps={{
            style: {
              borderRadius: '12px',
              padding: '20px',
              width: '320px',
            },
          }}
        >
          <IconButton
            aria-label="close"
            onClick={() => setMinimized(true)}
            className="dialog-close-btn"
          >
            <CloseIcon />
          </IconButton>
          <DialogContent>
            <p className="dialog-text">
              Connecting to Dochub, Updating the documents …
            </p>

            <div className="dots-animation">
              <span></span><span></span><span></span><span></span>
            </div>
          </DialogContent>
        </Dialog>
      )}

      {props.loading && minimized && (
        <IconButton
          aria-label="restore-dialog"
          onClick={() => {
            setMinimized(false);
            setOpenDialog(true);
          }}
          className="minimized-loader-btn"
        >
          <CircularProgress size={32} color="primary" />
        </IconButton>
      )}

      <LogoutConfirmationCard
        logoutCardVisibility={state.logoutCardVisibility}
        cardClose={setState}
      />
    </>
  );
};

export default Home;


import React, { useMemo, useState } from "react";
import { Link } from "react-router-dom";
import {
  MaterialReactTable,
  useMaterialReactTable,
  MRT_ColumnDef
} from "material-react-table";
import VisibilityIcon from "@mui/icons-material/Visibility";

const Tracker = () => {
  const [openModal, setOpenModal] = useState(false);
  const [selectedRow, setSelectedRow] = useState<any>(null);

  const data = useMemo(
    () => [
      {
        Column1: "1",
        Column2: "12",
        Column3: "321",
        Column4: "Phase-I",
        Column5: "3/12/2025 03:38 PM",
        Column6: "View",
      }
    ],
    []
  );

  const columns = useMemo<MRT_ColumnDef<any>[]>(
    () => [
      { header: "Serial No", accessorKey: "Column1" },
      { header: "Tech Transfer ID", accessorKey: "Column2" },
      { header: "Project ID", accessorKey: "Column3" },
      { header: "Phase of Molecules", accessorKey: "Column4" },
      { header: "Shared On", accessorKey: "Column5" },

      {
        header: "Action",
        accessorKey: "Column6",
        Cell: ({ row }) => (
          <span
            className="view-icon"
            onClick={() => {
              setSelectedRow(row.original);
              setOpenModal(true);
            }}
          >
            <VisibilityIcon className="view-icon-svg" />
          </span>
        ),
      },
    ],
    []
  );

  const table = useMaterialReactTable({
    columns,
    data,
    enableStickyHeader: true,
    muiTableContainerProps: { sx: { maxHeight: 400 } }
  });

  return (
    <div className="container-fluid">
      <Link className="active_breadcrumb" to={"/dashboard"}>
        Dashboard
      </Link>
      {" / "}
      <span>Tracker</span>

      <div className="colorbox p-3">
        <div className="card cus-Table mt-3">
          <h5>Tracker</h5>
          <MaterialReactTable table={table} />
        </div>
      </div>

      {openModal && selectedRow && (
        <div className="tracker-modal-overlay">
          <div className="tracker-modal">
            <button className="tracker-modal-close" onClick={() => setOpenModal(false)}>
              ✕
            </button>

            <h4>Status Breakdown</h4>

            <div className="chip-container">
              <span className="chip chip-blue">Tech Transfer ID: {selectedRow.Column2}</span>
              <span className="chip chip-yellow">Project ID: {selectedRow.Column3}</span>
              <span className="chip chip-green">Phase: {selectedRow.Column4}</span>
              <span className="chip chip-red">Shared On: {selectedRow.Column5}</span>
            </div>

            <div className="table-responsive">
              <table className="table table-bordered table-sm tracker-table">
                <thead>
                  <tr>
                    <th>Stream</th>
                    <th>Total Required</th>
                    <th>Yet to Initiate</th>
                    <th className="text-warning">Draft</th>
                    <th className="text-primary">Review</th>
                    <th className="text-success">Approved</th>
                  </tr>
                </thead>

                <tbody>
                  <tr>
                    <td>PR&D</td>
                    <td>9</td>
                    <td>1</td>
                    <td>1</td>
                    <td>7</td>
                    <td>2</td>
                  </tr>

                  <tr>
                    <td>AR&D</td>
                    <td>10</td>
                    <td>4</td>
                    <td>4</td>
                    <td>1</td>
                    <td>1</td>
                  </tr>

                  <tr>
                    <td>PE</td>
                    <td>2</td>
                    <td>0</td>
                    <td>2</td>
                    <td>0</td>
                    <td>0</td>
                  </tr>

                </tbody>
              </table>
            </div>

            <div className="text-end mt-3">
              <button className="btn btn-primary" onClick={() => setOpenModal(false)}>
                Close
              </button>
            </div>

          </div>
        </div>
      )}
    </div>
  );
};

export default Tracker;




.dots-animation {
  display: flex;
  gap: 6px;
  justify-content: center;
}

.dots-animation span {
  width: 10px;
  height: 10px;
  background: #00d084;
  border-radius: 50%;
  animation: bounce 0.6s infinite alternate;
}

.dots-animation span:nth-child(2) { animation-delay: 0.2s; }
.dots-animation span:nth-child(3) { animation-delay: 0.4s; }
.dots-animation span:nth-child(4) { animation-delay: 0.6s; }

@keyframes bounce {
  from { transform: translateY(0); }
  to { transform: translateY(-8px); }
}

.dialog-text {
  font-size: 16px;
  text-align: center;
  margin-bottom: 10px;
}

.dialog-close-btn {
  position: absolute !important;
  top: 8px;
  right: 8px;
}

.minimized-loader-btn {
  position: fixed !important;
  top: 90px;
  right: 30px;
  z-index: 9999;
  padding: 0 !important;
}

/* Modal overlay */
.tracker-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
  z-index: 9999;
}

/* Modal box */
.tracker-modal {
  background: #fff;
  width: 100%;
  max-width: 900px;
  border-radius: 12px;
  padding: 20px;
  position: relative;
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}

/* Close button */
.tracker-modal-close {
  position: absolute;
  top: 12px;
  right: 12px;
  background: transparent;
  border: none;
  font-size: 24px;
  cursor: pointer;
}

/* View icon */
.view-icon {
  cursor: pointer;
  padding: 6px;
  border-radius: 8px;
  transition: background 0.2s ease;
}

.view-icon:hover {
  background: #f3f4f6;
}

.view-icon-svg {
  font-size: 25px !important;
  color: #1e40af !important;
}

/* Chips */
.chip-container {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 16px;
}

.chip {
  padding: 6px 12px;
  border-radius: 20px;
  font-weight: 600;
  font-size: 13px;
}

.chip-blue { background: #e0e7ff; color: #1e40af; }
.chip-yellow { background: #fef3c7; color: #92400e; }
.chip-green { background: #dcfce7; color: #166534; }
.chip-red { background: #fee2e2; color: #991b1b; }

.tracker-table th,
.tracker-table td {
  text-align: left !important;
  font-size: 13px;
}
