import React, { useState, useEffect } from 'react';
import { ColDef } from 'ag-grid-community';
import http from '../../http';
import copyLink from '../../assets/images/link.svg';
import { Link, useNavigate } from 'react-router-dom';
import ProcessOwnerARDDashboard from './Dashboard/ProcessOwner 1';
import QAApproverDashboard from './Dashboard/QAApprover 1';
import SystemOwnerDashboard from './Dashboard/SystemOwner 1';
import { useLocation } from 'react-router-dom';
import axiosInstance from '../../utilities/interceptor';
import { apiUrls } from '../../utilities/urls';

const Dashboard = ({ setLoader }: any) => {
  const location = useLocation();
  const loginResponse = location.state?.loginResponse;

  console.log('loginResponse', loginResponse);

  let options = {
    headers: {
      Authorization: `Bearer ${sessionStorage.getItem('token')}`,
    },
  };
  const navigate = useNavigate();
  const [loading, setLoading] = useState(true);
  const [projectCode, setProjectCode] = useState('');
  const [moleculePhases, setMoleculePhases] = useState([]);
  const [techTransferTypes, setTechTransferTypes] = useState([]);
  const [techTransferPackageData, setTechTransferPackageData] = useState<any[]>(
    []
  );
  const [selectedPhase, setSelectedPhase] = useState<string | null>(null);
  const [selectedTechTransferType, setSelectedTechTransferType] = useState<
    string | null
  >(null);
  const [columnDefs, setColumnDefs] = useState<ColDef[]>([
    {
      headerName: 'S.No',

      valueGetter: (params: any) => {
        if (params) {
          return params.node.rowIndex + 1;
        } else {
          return 'NA';
        }
      },
      width: 81.1,
      cellStyle: { textAlign: 'center' },
    },
    {
      headerName: 'ID',
      field: 'project_id',
      width: 81.1,
      filter: true,
      cellStyle: { textAlign: 'center' },
    },
    {
      headerName: 'Project Code',
      field: 'project_code',
      width: 130,
      filter: true,
      cellStyle: { textAlign: 'center' },
    },
    {
      headerName: 'Phase of Molecule',
      field: 'molecule_phase',
      width: 164,
      filter: true,
      cellStyle: { textAlign: 'center' },
    },
    {
      headerName: 'Date',
      field: 'creation_date',
      width: 110,
      filter: true,
      cellStyle: { textAlign: 'center' },
    },
    {
      headerName: 'Attached',
      field: 'attachment_percentage',
      width: 108,
      filter: true,

      cellStyle: (params: any) => {
        const percentage = parseFloat(params.value);
        return percentage === 100
          ? { color: '#83C00A', fontWeight: 'bold' }
          : { color: '#FF9200', fontWeight: 'bold' };
      },
    },
    {
      headerName: 'Status',
      field: 'status',
      width: 98,
      filter: true,
      cellStyle: { textAlign: 'center' },
    },
    {
      headerName: 'URL',
      field: 'url',
      cellRenderer: (params: any) => params.value,
      width: 90,
      filter: true,
      cellStyle: { textAlign: 'center' },
    },
  ]);

  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoader(true);
        const moleculePhasesResp = await axiosInstance.get(
          apiUrls.allMoleculePhases,
          options
        );
        setMoleculePhases(moleculePhasesResp.data);

        const techTransferTypesResp = await axiosInstance.get(
          apiUrls.allTechTransferTypes,
          options
        );
        setTechTransferTypes(techTransferTypesResp.data);

        const techTransferPackageDataResp = await axiosInstance.get(
          apiUrls.packages,
          options
        );
        setTechTransferPackageData(techTransferPackageDataResp.data);

        setLoading(false);
        setLoader(false);

        let prevProjectCode = localStorage.getItem('project_code');
        let prevMoleculePhase = localStorage.getItem('molecule_phase');
        let prevTtType = localStorage.getItem('tt_type');

        if (prevProjectCode && prevMoleculePhase && prevTtType) {
          let payload: any = {
            project_code: prevProjectCode,
            molecule_phase: prevMoleculePhase,
            tt_type: prevTtType,
          };
          if (prevTtType === 'New') {
            await axiosInstance
              .post(apiUrls.removeUnsavedData, payload, options)
              .then((resp: any) => {
                if (resp.data.message) {
                  localStorage.clear();
                }
                return;
              })
              .catch((err: any) => {
                console.log('removeUnsavedData err', err);
                return;
              });
          } else {
            await axiosInstance
              .post(apiUrls.removeUnsavedAddendumData, payload, options)
              .then((resp: any) => {
                if (resp.data.message) {
                  localStorage.clear();
                }
                return;
              })
              .catch((err: any) => {
                console.log('removeUnsavedData err', err);
                return;
              });
          }
        }
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    };
    fetchData();
  }, []);

  const [copySuccess, setCopySuccess] = useState<boolean | null>(null);
  const copyText = (text: string) => {
    const tempTextArea = document.createElement('textarea');
    tempTextArea.value = text;

    document.body.appendChild(tempTextArea);
    tempTextArea.select();

    try {
      const successful = document.execCommand('copy');
    } catch (err) {
      console.error('Error copying text:', err);
    }

    document.body.removeChild(tempTextArea);
  };

  const rowData = techTransferPackageData.map((item) => {
    const inputDate = new Date(item.creation_date);
    const year = inputDate.getFullYear();
    const month = String(inputDate.getMonth() + 1).padStart(2, '0');
    const day = String(inputDate.getDate()).padStart(2, '0');
    const formattedDate = `${day}/${month}/${year}`;

    return {
      project_id: item.project_id,
      project_code: item.project_code,
      molecule_phase: item.molecule_phase,
      creation_date: formattedDate,
      attachment_percentage: `${item.attachment_percentage}%`,
      status: item.status,
      url: (
        <>
          <button
            className="btn btn-primary btn-sm minW70"
            onClick={() => copyText(item.url)}
          >
            Copy <img src={copyLink} alt="" />
          </button>
        </>
      ),
    };
  });

  const handlePhaseChange = (event: React.ChangeEvent<HTMLSelectElement>) => {
    setSelectedPhase(event.target.value);
  };

  const handleTechTransferTypeChange = (
    event: React.ChangeEvent<HTMLSelectElement>
  ) => {
    setSelectedTechTransferType(event.target.value);
  };

  const isNextButtonEnabled =
    selectedPhase !== null &&
    selectedTechTransferType !== null &&
    selectedPhase !== 'select' &&
    selectedTechTransferType !== 'select';

  return (
    <>
      {sessionStorage.getItem('userrole') === 'Process Owner' && (
        <ProcessOwnerARDDashboard setLoader={setLoading} />
      )}

      {sessionStorage.getItem('userrole') === 'System Owner-Admin' && (
        <SystemOwnerDashboard setLoader={setLoading} />
      )}
      {sessionStorage.getItem('userrole') === 'QA Approver' && (
        <QAApproverDashboard setLoader={setLoading} />
      )}
    </>
  );
};

export default Dashboard;


import React, { useEffect, useState } from 'react';

const DocumentEditCard = (props: any) => {
  const [state, setState] = useState({
    department_name: '',
    document_name: '',
    active: true,
  });

  useEffect(() => {
    setState({
      department_name: props.data.department_name,
      document_name: props.data.document_name,
      active: props.data.active,
    });
  }, [props]);

  const handleChange = (name: string, value: string | boolean) => {
    setState((prev: any) => ({
      ...prev,
      [name]: value,
    }));
  };

  const handleCheckBox = () => {
    handleChange('active', !state.active);
  };

  const saveChanges = () => {
    props.saveChanges({
      ...props.data,
      department_name: state.department_name,
      document_name: state.document_name,
      active: state.active,
    });
  };

  return (
    <div className="accordion" id="editAccordion">
      <div className="accordion-item">
        <h2 className="accordion-header" id="editAccordionHeader">
          <button
            className="accordion-button"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#editAccordionBody"
            aria-expanded="true"
            aria-controls="editAccordionBody"
          >
            Edit
          </button>
        </h2>
        <div
          id="editAccordionBody"
          className="accordion-collapse collapse show"
          aria-labelledby="editAccordionHeader"
          data-bs-parent="#editAccordion"
        >
          <div className="accordion-body">
            <div className="mb-3">
              <label htmlFor="exampleFormControlInput1" className="form-label">
                Department
              </label>
              <select
                className="form-select mb-3"
                aria-label=".form-select example"
                onChange={(e) =>
                  handleChange('department_name', e.target.value)
                }
                value={state.department_name}
              >
                <option value="PRD">PRD</option>
                <option value="ARD">ARD</option>
                <option value="PE">PE</option>
              </select>
            </div>

            <div className="mb-3">
              <label htmlFor="exampleFormControlInput1" className="form-label">
                Document Name
              </label>
              <input
                type="text"
                className="form-control"
                value={state.document_name}
                onChange={(e) => handleChange('document_name', e.target.value)}
              />
            </div>

            <div className="mb-3">
              <input
                type="checkbox"
                style={{ marginRight: '5px' }}
                id="exampleFormControlInput1"
                name="editEnable"
                checked={state.active}
                onChange={handleCheckBox}
              />
              <label htmlFor="exampleFormControlInput1" className="form-label">
                Enable
              </label>
            </div>

            <div className="accordion-footer">
              <button
                type="button"
                className="btn btn-secondary"
                data-bs-toggle="collapse"
                data-bs-target="#editAccordionBody"
              >
                Close
              </button>
              <button
                type="button"
                className="btn btn-primary"
                onClick={saveChanges}
              >
                Save
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default DocumentEditCard;


import React, { useEffect, useRef, useState } from 'react';
import editIcon from '../../assets/images/edit.png';
import GridCard from '../../utilities/GridCard';
import DocumentEditCard from './DocumentEditCard';
import http from '../../http';
import { useNavigate } from 'react-router-dom';
import $ from 'jquery';
import {
  MaterialReactTable,
  useMaterialReactTable,
  type MRT_ColumnDef,
} from 'material-react-table';

import Swal from 'sweetalert2';
import { apiUrls } from '../../utilities/urls';
import axiosInstance from '../../utilities/interceptor';

const transformData = (data: any) => {
  return data.map((item: any) => {
    const transformedItem = { ...item };
    if (item.department_name === 'ARD') {
      transformedItem.department_name = 'AR&D';
    } else if (item.department_name === 'PRD') {
      transformedItem.department_name = 'PR&D';
    }
    return transformedItem;
  });
};

const DocumentCheckList = (props: any) => {
  let options = {
    headers: {
      Authorization: `Bearer ${sessionStorage.getItem('token')}`,
    },
  };

  const handleSweetAlert = (
    titleData: string,
    textData: string,
    iconData: string
  ) => {
    if (iconData === 'success') {
      Swal.fire({
        title: titleData,
        text: textData,
        icon: 'success',
        showConfirmButton: false,
      });
    } else {
      Swal.fire({
        title: titleData,
        text: textData,
        icon: 'error',
        showConfirmButton: false,
      });
    }
    setTimeout(() => {
      Swal.close();
    }, 1500);
  };

  const accordionRef = useRef<any>(null);

  const navigate = useNavigate();
  let [state, setState] = useState({
    documentList: [],
    departmentList: [],
    selectedRowIndex: null,
    updateRow: false,
    department_name: '',
    document_name: '',
    formTitle: '+ Add Document List',
    formBtnText: 'Add',
    isUpdateBtnVisible: false,
    showResetBtn: true,
    active: true,
    columnDefs: [
      {
        accessorKey: 'department_name',
        header: 'Department Name',
      },
      {
        accessorKey: 'document_name',
        header: 'Document Name',
      },
      {
        accessorKey: 'actions',
        header: 'Actions',
        size: 150,
        Cell: ({ row }: any) => (
          <button
            className="editBtn"
            onClick={(event) => {
              event.preventDefault();
              editRow(row, row.index);
            }}
          >
            <img src={editIcon} alt="Edit" />
          </button>
        ),
      },
    ],
    setEditData: {},
  });

  const [accordianOpenedByEdit, setAccordianOpenedByEdit] =
    useState<boolean>(false);

  useEffect(() => {
    debugger;
    const transformedData = transformData(props.documentList);
    setState((prev) => ({
      ...prev,
      documentList: transformedData,
      departmentList: props.departmentList,
    }));
  }, [props]);

  const toggleDocxAccrodian = () => {
    const accordianButton = $('.accordion-button');
    const accordianCard = $('.accordion-collapse');
    if (accordianButton && accordianCard) {
      console.log(
        "accordianButton.attr('aria-expanded')",
        accordianButton.attr('aria-expanded')
      );
      // Toggle aria-expanded attribute
      const currentAriaValue = accordianButton.attr('aria-expanded');
      accordianButton.attr(
        'aria-expanded',
        currentAriaValue === 'true' ? 'false' : 'true'
      );

      // Toggle the 'collapsed' class
      accordianButton.toggleClass('collapsed');

      // If you have additional styles for the expanded state, you can toggle the 'expanded' class
      accordianButton.toggleClass('expanded');

      accordianCard.toggleClass('show');
    }
  };

  const openAccordian = () => {
    const accordianButton = $('.accordion-button');
    const accordianCard = $('.accordion-collapse');
    if (accordianButton && accordianCard) {
      console.log(
        "accordianButton.attr('aria-expanded')",
        accordianButton.attr('aria-expanded')
      );
      // Toggle aria-expanded attribute
      const currentAriaValue = accordianButton.attr('aria-expanded');
      accordianButton.attr(
        'aria-expanded',
        currentAriaValue === 'true' ? 'true' : 'true'
      );

      // Toggle the 'collapsed' class
      if (accordianButton.hasClass('collapsed')) {
        accordianButton.removeClass('collapsed');
      }

      if (!accordianButton.hasClass('expanded')) {
        accordianButton.addClass('expanded');
      }

      if (!accordianCard.hasClass('show')) {
        accordianCard.toggleClass('show');
      }
    }
  };

  const [buttonDisabled, setButtonDisabled] = useState<boolean | undefined>(
    true
  );

  const saveChanges = () => {
    let userRole = sessionStorage.getItem('userrole');
    let userName = sessionStorage.getItem('username');
    let trimmedDocumentName = state.document_name.trim();

    if (state.department_name === '' || state.department_name === 'select') {
      handleSweetAlert('', 'Department option has to be selected', 'error');
      return;
    }
    if (!trimmedDocumentName) {
      handleSweetAlert('', 'Document Name is required', 'error');
      return;
    }

    if (
      state.department_name &&
      trimmedDocumentName &&
      userRole === 'System Owner-Admin'
    ) {
      let payload = {
        ...state.setEditData,
        department_name: state.department_name,
        document_name: trimmedDocumentName,
        active: state.active,
        updated_by: userName,
      };
      axiosInstance
        .put(apiUrls.updateDocument, payload, options)
        .then((resp: any) => {
          const updatedList = state.documentList.map(
            (item: any, index: number) => {
              if (index === state.selectedRowIndex) {
                return {
                  ...item,
                  department_name:
                    state.department_name === 'ARD'
                      ? 'AR&D'
                      : state.department_name === 'PRD'
                        ? 'PR&D'
                        : state.department_name,
                  document_name: trimmedDocumentName,
                  active: state.active,
                };
              }
              return item;
            }
          );

          console.log('updatedList', updatedList);

          setState((prev: any) => ({
            ...prev,
            updateRow: true,
            documentList: updatedList,
            formTitle: '+ Add Document List',
            formBtnText: 'Add',
            showResetBtn: true,
            isUpdateBtnVisible: false,
            active: false,
            selectedRowIndex: null, // Reset the selected row index
            setEditData: {},
          }));
          handleSweetAlert('', 'Document is updated', 'success');
          toggleDocxAccrodian();
          handleReset();
        })
        .catch((err: any) => {
          console.log('updateDocument err', err);
          props.setLoader(false);
          handleSweetAlert('', err.response.data.error, 'error');
          toggleDocxAccrodian();
          handleReset();
        });
    } else {
      sessionStorage.clear();
      navigate('/login');
    }
  };

  const addDocument = () => {
    let userRole = sessionStorage.getItem('userrole');
    let userName = sessionStorage.getItem('username');

    if (userRole !== 'System Owner-Admin') {
      sessionStorage.clear();
      navigate('/login');
      return;
    }

    const trimmedDocumentName = state.document_name.trim();

    if (state.department_name === '' || state.department_name === 'select') {
      handleSweetAlert('', 'Department option has to be selected', 'error');
      return;
    }
    if (!trimmedDocumentName) {
      handleSweetAlert('', 'Document Name is required', 'error');
      return;
    }

    //for system owner role: if given department_name and document_name
    if (state.department_name && trimmedDocumentName) {
      let department_name = state.department_name;
      let newDocx: any = {
        department_name: department_name,
        document_name: trimmedDocumentName,
        active: true,
      };
      let payload = {
        department_name: state.department_name,
        document_name: trimmedDocumentName,
        created_by: userName,
      };

      props.setLoader(true);
      axiosInstance
        .post(apiUrls.createDocument, payload, options)
        .then((resp: any) => {
          if (resp.status === 201) {
            newDocx['id'] = resp.data.id;
            if (newDocx.department_name === 'ARD') {
              newDocx.department_name = 'AR&D';
            } else if (newDocx.department_name === 'PRD') {
              newDocx.department_name = 'PR&D';
            }
            setState((prev: any) => ({
              ...prev,
              documentList: [newDocx, ...state.documentList],
              formTitle: '+ Add Document List',
              formBtnText: 'Add',
              active: true, // Set active to true when adding
              showResetBtn: true,
            }));
            handleReset();
            toggleDocxAccrodian();
            handleSweetAlert('', 'Document is added', 'success');
          }
        })
        .catch((err: any) => {
          console.log('createDocument err', err);
          handleSweetAlert('', err.response.data.error, 'error');
          handleReset();
        });
      props.setLoader(false);
    }
  };

  const reverseTransformDepartmentName = (departmentName: any) => {
    if (departmentName === 'AR&D') {
      return 'ARD';
    } else if (departmentName === 'PR&D') {
      return 'PRD';
    }
    return departmentName;
  };

  const editRow = (params: any, index: any) => {
    openAccordian();
    setAccordianOpenedByEdit(true);
    setState((prev) => ({
      ...prev,
      setEditData: params.original,
      selectedRowIndex: index,
      formTitle: '+ Edit Document List',
      formBtnText: 'Update',
      showResetBtn: false,
      department_name: reverseTransformDepartmentName(
        params.original.department_name
      ),
      document_name: params.original.document_name,
      active: params.original.active || false,
      isUpdateBtnVisible: true,
    }));

    window.scrollTo({
      top: 0,
      behavior: 'smooth',
    });
  };

  useEffect(() => {
    if (
      state.updateRow &&
      (state.selectedRowIndex === 0 || state.selectedRowIndex)
    ) {
      setState((prev: any) => ({
        ...prev,
        updateRow: false,
        setEditData: {},
      }));
    }
  }, [state.updateRow]);

  const resetForm = () => {
    setState((prev: any) => ({
      ...prev,
      department_name: '',
      document_name: '',
      showResetBtn: true,
      active: true,
      buttonDisabled: true,
    }));
  };

  const handleReset = () => {
    resetForm();
  };

  const [error, setError] = useState('');
  const isValidInput = (value: string) => {
    const allowedCharactersRegex = /^[A-Za-z0-9@ _\-()\[\]]*$/;
    return allowedCharactersRegex.test(value);
  };

  const handleChange = (name: string, value: string | boolean) => {
    debugger;
    if (isValidInput(value as string)) {
      setError('');
      setState((prev: any) => ({
        ...prev,
        [name]: value,
      }));
      if (name === 'active') {
        setButtonDisabled(undefined);
      }
    } else {
      handleSweetAlert(
        '',
        'Invalid input: Only letters, numbers, spaces, and certain characters are allowed.',
        error
      );
    }
  };

  useEffect(() => {
    if (
      state.department_name &&
      state.document_name &&
      !accordianOpenedByEdit
    ) {
      setButtonDisabled(undefined);
    } else {
      setButtonDisabled(true);
    }
  }, [state.department_name, state.document_name, accordianOpenedByEdit]);

  const handleCheckBox = () => {
    handleChange('active', !state.active);
  };

  const handleClose = () => {
    debugger;
    setState((prev: any) => ({
      ...prev,
      formTitle: '+ Add Document List',
      formBtnText: 'Add',
      showResetBtn: true,
    }));
    handleReset();
  };

  const transformDepartmentName = (departmentName: string) => {
    if (departmentName === 'ARD') {
      return 'AR&D';
    } else if (departmentName === 'PRD') {
      return 'PR&D';
    }
    return departmentName;
  };

  const table = useMaterialReactTable({
    columns: state.columnDefs,
    data: state.documentList,
    enableRowNumbers: true,
  });

  return (
    <div className="colorbox p-3">
      <div className="row">
        <div className="col-12">
          <div className="accordion mt-3" id="accordionPanelsStayOpenExample">
            <div className="accordion-item">
              <h2 className="accordion-header" id="panelsStayOpen-headingOne">
                <button
                  className="accordion-button collapsed doc-fonts"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseOne"
                  aria-expanded="true"
                  aria-controls="panelsStayOpen-collapseOne"
                  onClick={handleClose}
                  ref={accordionRef}
                >
                  {state.formTitle}
                </button>
              </h2>
              <div
                id="panelsStayOpen-collapseOne"
                className="accordion-collapse collapse"
                aria-labelledby="panelsStayOpen-headingOne"
              >
                <div className="accordion-body">
                  <div className="row">
                    <div className="col-sm-6">
                      <div className="mb-3">
                        <label
                          htmlFor="exampleFormControlInput1"
                          className="form-label"
                        >
                          Department
                        </label>
                        <select
                          className="form-select mb-3"
                          aria-label=".form-select example"
                          name="department_name"
                          value={state.department_name}
                          onChange={(e) =>
                            handleChange('department_name', e.target.value)
                          }
                          disabled={!state.active}
                        >
                          <option>select</option>
                          {state.departmentList.map((each: any) => (
                            <option key={each} value={each}>
                              {transformDepartmentName(each)}
                            </option>
                          ))}
                        </select>
                      </div>
                      <div className="mb-3">
                        {state.formBtnText === 'Update' && (
                          <div className="mb-3">
                            <input
                              type="checkbox"
                              style={{ marginRight: '5px' }}
                              id="exampleFormControlInput1"
                              name="editEnable"
                              checked={state.active} // Display the current value when editing
                              onChange={handleCheckBox}
                            />
                            <label
                              htmlFor="exampleFormControlInput1"
                              className="form-label"
                            >
                              Enable
                            </label>
                          </div>
                        )}
                      </div>
                    </div>
                    <div className="col-sm-6">
                      <div className="mb-3">
                        <label
                          htmlFor="exampleFormControlInput1"
                          className="form-label"
                        >
                          Document Name
                        </label>
                        <input
                          type="text"
                          className="form-control"
                          name="document_name"
                          value={state.document_name}
                          onChange={(e) =>
                            handleChange('document_name', e.target.value)
                          }
                          disabled={!state.active}
                        />
                      </div>
                    </div>
                  </div>
                  <hr />
                  <div className="text-right mButton">
                    {state.showResetBtn && (
                      <button
                        className="btn btn-outline-primary right-spacing"
                        onClick={handleReset}
                      >
                        Reset
                      </button>
                    )}
                    {state.formBtnText === 'Update' && (
                      <button
                        type="button"
                        className="btn btn-outline-primary right-spacing"
                        data-bs-toggle="collapse"
                        data-bs-target="#panelsStayOpen-collapseOne"
                        aria-expanded="false"
                        onClick={handleClose}
                      >
                        Close
                      </button>
                    )}
                    {state.showResetBtn && (
                      <button
                        className="btn btn-primary ml-3"
                        onClick={addDocument}
                      >
                        Add
                      </button>
                    )}
                    {state.formBtnText === 'Update' && (
                      <button
                        type="button"
                        className="btn btn-primary ml-3"
                        onClick={saveChanges}
                      >
                        Update
                      </button>
                    )}
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div className="card cus-Table mt-3">
            <h2 className="accordion-header" id="panelsStayOpen-headingOne">
              <h5>List of Document Lists</h5>
            </h2>
            <MaterialReactTable table={table} />
          </div>
        </div>
      </div>
    </div>
  );
};

export default DocumentCheckList;


import React, { useState } from 'react';
import { Routes, Route } from 'react-router-dom';
import Home from './components/Home/Home';
import Login from './components/Authentication/Login';
import Dashboard from './components/Home/Dashboard';
import Masters from './components/Home/Masters';
import Users from './components/Home/Users';
import PrivateRoute from './components/Authentication/PrivateRoute';
import MsdsComponent from './components/Home/MsdsComponent';
import Transaction from './components/Home/Transaction/Transaction';
import ConfigurationMaster from './components/Configurations/ConfigurationMaster';
import TransactionLink from './components/Home/Transaction/TransactionLink';
import NoUrlFound from './components/NoUrlFound';
import SharingHistory from './components/SharingHistory/SharingHistory';
import Healthcheck from './components/Authentication/Healthcheck';

// ⭐ IMPORT TRACKER FROM CORRECT FOLDER
import Tracker from './components/Tracker/Tracker';

const App = () => {
  const [loading, setLoading] = useState(false);

  return (
    <div>
      <Routes>

        <Route path="/login" element={<Login />} />

        <Route
          path="/transactionLink/:projectCode/:moleculePhase/:projectName"
          element={<TransactionLink />}
        />

        <Route
          path="/"
          element={
            <PrivateRoute>
              <Home loading={loading} />
            </PrivateRoute>
          }
        >

          <Route
            path="dashboard"
            element={
              <PrivateRoute>
                <Dashboard setLoader={setLoading} />
              </PrivateRoute>
            }
          />

          <Route
            path="masters"
            element={
              <PrivateRoute>
                <Masters setLoader={setLoading} />
              </PrivateRoute>
            }
          />

          <Route
            path="users"
            element={
              <PrivateRoute>
                <Users setLoader={setLoading} />
              </PrivateRoute>
            }
          />

          <Route
            path="msds"
            element={
              <PrivateRoute>
                <MsdsComponent setLoader={setLoading} />
              </PrivateRoute>
            }
          />

          <Route
            path="Configuration"
            element={
              <PrivateRoute>
                <ConfigurationMaster setLoader={setLoading} />
              </PrivateRoute>
            }
          />

          <Route
            path="SharingHistory"
            element={
              <PrivateRoute>
                <SharingHistory setLoader={setLoading} />
              </PrivateRoute>
            }
          />

          {/* ⭐ TRACKER ROUTE HERE */}
          <Route
            path="Tracker"
            element={
              <PrivateRoute>
                <Tracker setLoader={setLoading} />
              </PrivateRoute>
            }
          />

          <Route
            path="transaction/:projectCode/:moleculePhase/:ttType/:projectName"
            element={
              <PrivateRoute>
                <Transaction setLoading={setLoading} loading={loading} />
              </PrivateRoute>
            }
          />

        </Route>

        <Route path="*" element={<NoUrlFound />} />

      </Routes>
    </div>
  );
};

export default App;
