import React, { useState, useEffect } from 'react';
import Navbar from '../Navbar';
import Sidebar from '../Sidebar';
import { Outlet } from 'react-router-dom';
import LogoutConfirmationCard from './LogoutConfirmationCard';

const Home = (props: any) => {
  const [showSidebar, setShowSidebar] = useState(false);
  const [loadingClass, setLoadingClass] = useState('page-loader');

  useEffect(() => {
    setLoadingClass(props.loading ? 'page-loader' : 'd-none');
  }, [props.loading]);

  return (
    <>
      <div className={loadingClass}>
        <div className="spinner"></div>
        <div className="txt">LOADING</div>
      </div>

      <Navbar toggleSidebar={() => setShowSidebar(prev => !prev)} />

      {showSidebar && <Sidebar />}

      <section className="section_container">
        <Outlet />
      </section>

      <LogoutConfirmationCard
        logoutCardVisibility=""
        cardClose={() => {}}
      />
    </>
  );
};

export default Home;


import React, { useEffect, useState } from 'react';
import companyLogo from '../assets/images/companyLogo.svg';
import homoLogo from '../assets/images/home1.svg';
import bars from '../assets/images/bars.png';
import { Link, useNavigate } from 'react-router-dom';
import ProfileCard from './Home/ProfileCard';

const Navbar = ({ toggleSidebar }: any) => {
  const navigate = useNavigate();

  const [state, setState] = useState({
    username: '',
    tagName: '',
  });

  useEffect(() => {
    const userName = sessionStorage.getItem('username');
    const userRole = sessionStorage.getItem('userrole');
    const department = sessionStorage.getItem('department');

    if (!userName) {
      sessionStorage.clear();
      navigate('/login');
      return;
    }

    let tag = userName;
    if (userRole === 'Process Owner') {
      if (department === 'ARD') tag += ' | AR&D';
      if (department === 'PRD') tag += ' | PR&D';
    }

    const [first, last] = userName.split(' ');
    setState({
      username: `${first[0]}${last ? ' ' + last[0] : ''}`,
      tagName: tag,
    });
  }, []);

  return (
    <>
      <nav className="header">
        <div className="row">
          <div className="col-8 d-flex align-items-center">
            <span className="bars openbtn" onClick={toggleSidebar}>
              <img src={bars} alt="menu" />
            </span>

            <img src={companyLogo} alt="logo" />
            <h5 className="ms-2">Tech Transfer</h5>

            <Link to="/dashboard" className="ms-3">
              <img src={homoLogo} alt="home" /> Home
            </Link>
          </div>

          <div className="col d-flex justify-content-end align-items-center">
            <div className="dropdown-toggle" data-bs-toggle="dropdown">
              <div>
                <p>{state.username}</p>
                <span>{state.tagName}</span>
              </div>
            </div>

            <ul className="dropdown-menu">
              <li>
                <a className="dropdown-item" data-bs-toggle="modal" data-bs-target="#profileModal">
                  Profile
                </a>
              </li>
              <li>
                <a className="dropdown-item" data-bs-toggle="modal" data-bs-target="#logoutmodal">
                  Logout
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <ProfileCard />
    </>
  );
};

export default Navbar;


import React from 'react';
import { Link } from 'react-router-dom';
import folderIcon from '../assets/images/master.svg';
import adminIcon from '../assets/images/admin.svg';
import logoutIcon from '../assets/images/po.svg';
import msdsIcon from '../assets/images/msds.png';
import sharinghistory from '../assets/images/sharinghistory.svg';

const Sidebar = () => {
  const role = sessionStorage.getItem('userrole');

  return (
    <aside className="p_sideNav">
      <div className="main">
        {role === 'System Owner-Admin' && (
          <>
            <Link to="/masters"><img src={folderIcon} /></Link>
            <Link to="/users"><img src={adminIcon} /></Link>
            <Link to="/Configuration"><img src={folderIcon} /></Link>
            <Link to="/SharingHistory"><img src={sharinghistory} /></Link>
          </>
        )}

        {(role === 'Process Owner' || role === 'QA Approver') && (
          <>
            <Link to="/msds"><img src={msdsIcon} /></Link>
            <Link to="/SharingHistory"><img src={sharinghistory} /></Link>
          </>
        )}
      </div>

      <img
        src={logoutIcon}
        className="logout"
        data-bs-toggle="modal"
        data-bs-target="#logoutmodal"
      />
    </aside>
  );
};

export default Sidebar;


